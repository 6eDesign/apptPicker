var timeUtils=function(){var t,e,r,n={};return Date.prototype.toISOString||!function(){function t(t){var e=String(t);return 1===e.length&&(e="0"+e),e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),t=function(t,e){return t={timeing:t,arr:t.split(":")},t.hours=parseInt(t.arr[0]),t.minutes=parseInt(t.arr[1].substring(0,2)),t.pm="pm"==jDom.trim(t.arr[1].substring(2,t.arr[1].length)).toLowerCase(),t.militaryhours=t.pm&&12!=t.hours?12+t.hours:t.hours,t.militaryhours=t.pm||12!=t.hours?t.militaryhours:0,e.setHours(t.militaryhours),e.setMinutes(t.minutes),e.setSeconds(0),t.date=e.setMilliseconds(0),t.totalminutes=60*t.militaryhours+t.minutes,t},e=function(e,r,n,i){i="undefined"==typeof i?new Date:i,e=t(e,i),r=t(r,i);for(var s=(r.totalminutes-e.totalminutes)/n+1,o=[],u=0;s>u;++u)o.push(new Date(e.date+6e4*u*n));return o},n.getTimes=function(t,r,n,i){return e(t,r,n,i)},r=function(t,e){if(t){var r,n,i,s;return e="undefined"==typeof e?!1:e,r=t.getHours(),i=r>11?!0:!1,r-=0!=r&&i?12:0,r=0==r?12:r,n=t.getMinutes(),n=10>n?"0"+n:n,i=i?"pm":"am",s=e?r+i:r+":"+n+" "+i}return!1},n.formatTimeStr=function(t,e){return r(t,e)},n}(window,document,console);
var jDom=function(e,n,t){e.extend=function(){return r(arguments)},e.trim=function(){for(var e=[],n=0;n<arguments.length;++n)e.push(a(arguments[n]));return e.length>1?e:e[0]},e.getKeys=function(e){return i(e)},e.isArray=function(e){return"object"==typeof e?u(e):!1},e.ready=function(e){var t=n.onload;n.onload="function"!=typeof n.onload?e:function(){t(),e()}},e.trigger=function(e,n){return f(e,n)},e.on=function(e,n,t){n=o(n);for(var r=0;r<n.length;++r)s(e,n[r],t);return e},e.create=function(e){return l(e)},e.getByClassName=function(e,n){var r=[];return n="undefined"==typeof n?t:n,t.getElementsByClassName?r=n.getElementsByClassName(e):g(e,n)},e.getElementsByData=function(e,n,r,a){return n="undefined"==typeof n?null:n,r="undefined"==typeof r?t:r,a="undefined"==typeof a?"*":a,p(e,n,r,a)},e.getData=function(e){var n,t,r={};n=y(e),t=i(n);for(var a=0;a<t.length;++a)0==t[a].indexOf("data-")&&(r[t[a].substring(5,t[a].length)]=n[t[a]]);return r},e.addClass=function(e,n){var t="";if("undefined"!=typeof e.className){t=" "+o(e.className).join(" ")+" ",n=o(n);for(var r=0;r<n.length;++r)t.indexOf(" "+n[r]+" ")<0&&(t+=n[r]+" ");e.className=a(t)}else e.className=a(n);return e},e.removeClass=function(e,n,t){if(t="undefined"==typeof t?!0:!1)return h(e,n);for(var r=[],a=0;a<e.length;++a)r.push(h(e[a],n));return r};var r,a,i,o,u;r=function(e){for(var n=e.length-1;n>0;--n)for(var t in e[n]){var r=!0;"undefined"!=typeof e[n-1][t]&&"object"==typeof e[n][t]&&"object"==typeof e[n-1][t]&&(u(e[n])||u(e[n-1])||(r=!1,e[n-1][t]=jDom.extend(e[n-1][t],e[n][t]))),r&&(e[n-1][t]=e[n][t])}return e.length?e[0]:{}},a=function(e){return e.replace(/^\s+|\s+$/g,"")},i=function(e){if(Object.keys)return Object.keys(e);arr=[];for(var n in e)arr.push(n);return arr},o=function(e){return a(e).replace(/[ ]+/," ").split(" ")},u=function(e){return Array.isArray?Array.isArray(e):v instanceof Array};var f,s;f=function(e,n){var r;return t.createEvent?(r=t.createEvent("HTMLEvents"),r.initEvent(n,!0,!0)):(r=t.createEventObject(),r.eventType=n),r.eventName=n,t.createEvent?e.dispatchEvent(r):e.fireEvent("on"+r.eventType,r),e},s=function(e,n){return n.addEventListener?function(n,t,r){if(n&&!n.length||n===e)n.addEventListener(t,r,!1);else if(n&&n.length)for(var a=n.length,i=0;a>i;i++)s(n[i],t,r)}:n.attachEvent?function(n,t,r){if(n&&!n.length||n===e)n.attachEvent("on"+t,function(){return r.call(n,e.event)});else if(n.length)for(var a=n.length,i=0;a>i;i++)s(n[i],t,r)}:void 0}(this,t);var l,c,d;l=function(e){return c(e)},c=function(e){var n,r,a,i,o;if(e.contains=null==e.contains?[]:e.contains,e.attributes=null==e.attributes?{}:e.attributes,e.bindings=null==e.bindings?{}:e.bindings,e.type=null==e.type?"div":e.type,n=d(e.type,e.attributes,e.bindings),r=e.contains,"string"==typeof r)n.appendChild(t.createTextNode(r));else for(a=0;a<r.length;++a)i=r[a],"object"==typeof i?(o=l(i),n.appendChild(o)):n.appendChild(t.createTextNode(i));return n},d=function(e,n,r){var a,i,o;if(a=t.createElement(e),"undefined"!=typeof n)for(i in n)o=n[i],a.setAttribute(i,o);if("undefined"!=typeof r)for(var i in r)"function"==typeof r[i]&&s(a,i,r[i]);return a};var g,p,y,h;return g=function(e,n){var t,r=[];t=n.getElementsByTagName("*"),e=o(e);for(var a=0;a<t.length;++a){var i,u=!0;i=" "+o(t[a].className).join(" ")+" ";for(var f=0;f<e.length;++f){var s=" "+e[f]+" ";if(-1==i.indexOf(s)){u=!1;break}}u&&r.push(t[a])}return r},p=function(e,n,t,r){var a,i=[];a=t.getElementsByTagName(r);for(var o=0;o<a.length;++o)a[o].getAttribute("data-"+e)&&(null!=n?a[o].getAttribute("data-"+e)==n&&i.push(a[o]):i.push(a[o]));return i},y=function(e){var n,t={};n=e.attributes;for(var r=0;r<n.length;++r){var a=n.item(r);t[a.nodeName]=a.nodeValue}return t},h=function(e,n){if("undefined"!=typeof e.className){var t,r,a=0;n=o(n),t=o(e.className);for(var i=0;i<t.length;++i){r=0;for(var u=0;u<n.length;++u)if(t[i-a]==n[u]){t.splice(i-a,1),n.splice(u,1),++a;break}}e.className=t.length?t.join(" "):""}return e},e}(jDom||{},window,document,console);
jDom=function(t){var e,n;return _oldCreate=t.create,t.create=function(t){return _oldCreate("string"==typeof t?n(t):t)},e=function(e){var n,r,i,a,s,l,c,o;if(n={text:/\${([^}]+)}/,attr:/\$\[(.*?)\]/},r=e.match(n.text),i=e.match(n.attr),r&&(e=e.replace(r[0],"")),i&&(e=e.replace(i[0],"")),a="div",e.length>0||i)s=e.indexOf("."),l=e.indexOf("#"),s>0&&l>0?(a=e.substring(0,Math.min(s,l)),e=e.replace(a,"")):0>s&&0>l?(a=e,e=e.replace(a,"")):0>s*l&&(a=e.substring(0,Math.max(s,l)),e=e.replace(a,"")),c=!1,o=!1,e.length>0&&(l=e.indexOf("#"),l>-1&&(c=e.substring(l+1,e.length),s=c.indexOf("."),s>-1&&(c=c.substring(0,s)),e=e.replace("#"+c,"")),e.length>0&&(o=t.trim(e.split(".").join(" "))));else if(r&&!i)return r[1];if(i=i?i[1]:{},"string"==typeof i){var f=i.split(",");i={};for(var p=0;p<f.length;++p){var u=f[p].split("=");i[u[0]]=u[1]}}return c&&(i.id=c),o&&(i["class"]=o),{type:a,attributes:i,contains:r?[r[1]]:[]}},n=function(t){var r,i,a,s;r=t.split("$>"),a=r[0].indexOf("$+"),s=r[0].indexOf("$*"),i=e(a>-1||s>-1?"div":r.splice(0,1)[0]);for(var l=i,c=0;c<r.length;++c){for(var o=r[c].split("$+"),f=0;f<o.length;++f)if(s=o[f].indexOf("$*"),s>-1){var p=parseInt(o[f].substring(s+2,o[f].length));o[f]=o[f].replace("$*"+p,"");for(var u=0;p>u;++u)l.contains.push(n(o[f]))}else l.contains.push(n(o[f]));l=i.contains[i.contains.length-1]}return i},t}(jDom||{},window,document,console);
var theApptPicker=function(t,e,i){var r,s,a,n,c,p,d,o,l,k,m,g,u,f,h;n={count:0,pickers:{}},c={start:"9:00am",end:"5:00pm",subinterval:60,interval:15,slidedur:280,opendur:300,height:"351px",opentext:"Choose Times",inputid:!1,changecallback:!1,expandcallback:!1,changetxt:!0},s=function(t,e){e="undefined"==typeof e?!1:!0;var i,r,s;i=[],s=e?t.length:t.length-1;for(var a=0;s>a;++a){var n,c={},p={};e?(n=timeUtils.formatTimeStr(t[a]),p["data-time"]=t[a].getTime(),c.click=l,c.mouseover=k):(n=timeUtils.formatTimeStr(t[a],!0)+" - "+timeUtils.formatTimeStr(t[a+1],!0),p["data-start"]=t[a].getTime(),p["data-end"]=t[a+1].getTime(),c.click=d),p["data-listindex"]=a,i.push({type:"li",attributes:p,bindings:c,contains:n})}var c={};if(e)var c={webkitTransitionEnd:h,oTransitionEnd:h,transitionend:h};return r={type:"div",attributes:{"class":"list-container"},bindings:c,contains:[{type:"ul",attributes:{"class":e?"appt-picker second":"appt-picker first"},contains:i}]},jDom.create(r)},r=function(t){var i,r,a;i=jDom.extend({},c,jDom.getData(t)),r=timeUtils.getTimes(i.start,i.end,i.subinterval),a=timeUtils.getTimes(i.start,i.end,i.interval),r=s(r),a=s(a,!0),t.appendChild(r),t.appendChild(a),t.setAttribute("data-pickerid","picker_"+n.count),i.minimizedheight=t.offsetHeight+"px",0!=i.inputid&&(i.input=e.getElementById(i.inputid),i.input&&(i.input.setAttribute("data-pickerid","picker_"+n.count),i.input.setAttribute("readonly","true"),jDom.on(i.input,"focus",p))),n.pickers["picker_"+n.count]={el:t,minimized:!0,expanded:!1,selecting:!1,start:!1,end:!1,startindex:0,endindex:0,lasthoverindex:-1,settings:i},++n.count},p=function(){var t=this.getAttribute("data-pickerid");if(n.pickers[t].el.offsetHeight<parseFloat(n.pickers[t].settings.height)){var e=n.pickers[t].settings.height;n.pickers[t].minimized=!1}else{var e=n.pickers[t].settings.minimizedheight;n.pickers[t].minimized=!0}n.pickers[t].el.style.height=e},h=function(){var t,e;t=this.getElementsByTagName("ul")[0],jDom.removeClass(t,"scrollTop"),e=this.getAttribute("data-scrolltop"),t.style.marginTop="0px",this.scrollTop=e},f=function(t,e,i){var r=t.parentNode.scrollTop;i!=r&&(jDom.addClass(t,"scrollTop"),t.parentNode.setAttribute("data-scrolltop",i),t.style.marginTop=r-i+"px")},d=function(){var t,e,i,r,s,a;t=this.parentNode,e=t.parentNode.parentNode,i=e.getElementsByTagName("ul")[1],s=e.getAttribute("data-pickerid"),r=this.getAttribute("data-start"),jDom.removeClass(jDom.getByClassName("appt-picker first")[0].getElementsByTagName("li"),"active",!1),jDom.addClass(this,"active"),n.pickers[s].expanded||(n.pickers[s].expanded=!0,t.style.width="40%"),a=jDom.getElementsByData("time",r,e,"li")[0].offsetTop,f(i,s,a)},o=function(t,e,i){var r,s,a;if(r=t.getElementsByTagName("li"),s=Math.min(e,i),a=Math.max(e,i),e-i!=0){jDom.removeClass(r,"pick-start pick-middle pick-end",!1);for(var n=s+1;a>n;++n)jDom.addClass(r[n],"pick-middle");jDom.addClass(r[s],"pick-start"),jDom.addClass(r[a],"pick-end")}},m=function(t){var e;n.pickers[t].start>n.pickers[t].end&&(e=n.pickers[t].start,n.pickers[t].start=n.pickers[t].end,n.pickers[t].end=e)},l=function(){var t,r,s,a;if(t=this.parentNode,r=t.parentNode.parentNode,a=r.getAttribute("data-pickerid"),s=new Date(parseFloat(this.getAttribute("data-time"))),0==n.pickers[a].selecting)n.pickers[a].selecting=!0,n.pickers[a].end=!1,n.pickers[a].start=s,n.pickers[a].startindex=this.getAttribute("data-listindex"),jDom.removeClass(t.getElementsByTagName("li"),"pick-start pick-middle pick-end",!1),jDom.addClass(this,"pick-start"),g(a);else{if(this.getAttribute("data-listindex")!=n.pickers[a].startindex&&(n.pickers[a].selecting=!1,n.pickers[a].end=s,n.pickers[a].endindex=this.getAttribute("data-listindex"),o(t,n.pickers[a].startindex,n.pickers[a].endindex),jDom.trigger(n.pickers[a].settings.input,"click"),n.pickers[a].settings.inputid)){m(a);var c=timeUtils.formatTimeStr(n.pickers[a].start)+" to "+timeUtils.formatTimeStr(n.pickers[a].end),p=[n.pickers[a].start.toISOString(),n.pickers[a].end.toISOString()];i.log(p.join(",")),e.getElementById(n.pickers[a].settings.inputid).value=c}g(a)}},k=function(){var t,e,i;i=this.parentNode,t=i.parentNode.parentNode.getAttribute("data-pickerid"),e=this.getAttribute("data-listindex"),n.pickers[t].selecting&&n.pickers[t].lasthoverindex!=e&&(n.pickers[t].lasthoverindex=e,n.pickers[t].startindex!=e?o(i,n.pickers[t].startindex,e):(jDom.removeClass(i.getElementsByTagName("li"),"pick-start pick-middle pick-end",!1),jDom.addClass(this,"pick-start")))},g=function(t){if(n.pickers[t].settings.changecallback&&n.pickers[t].settings.changecallback(n.pickers[t]),n.pickers[t].settings.changetxt){var e="";e=timeUtils.formatTimeStr(n.pickers[t].start)+" to "+timeUtils.formatTimeStr(n.pickers[t].end)}},u=function(t,e,i){var r=!1;if(r="function"==typeof i?!0:!1,"undefined"!=typeof window[i]&&"function"==typeof window[i]&&(r=!0,i=window[i]),r){var s=t.getAttribute("data-pickerid");if("undefined"!=typeof n.pickers[s])switch(e.toLowerCase()){case"expand":n.pickers[s].settings.expandcallback=i;break;case"change":n.pickers[s].settings.changecallback=i}}},a=function(){for(var t=jDom.getByClassName("apptPicker"),e=0;e<t.length;++e)r(t[e])},t.apptPicker=function(t){var i,s,a,c,p;return c=e.getElementById(t),p=c.getAttribute("data-pickerid"),i=function(e,i){return c?(u(c,e,i),apptPicker(t)):void 0},a=function(){return"undefined"!=typeof n.pickers[p]&&n.pickers[p].start&&n.pickers[p].end?{start:n.pickers[p].start,end:n.pickers[p].end}:!1},s=function(t){if(c){for(var e in t)c.setAttribute("data-"+e,t[e]);return p?apptPicker(c.getAttribute("id")):(r(c),apptPicker(c.getAttribute("id")))}},toggleOpen=function(){return"undefined"!=typeof p?(jDom.trigger(n.pickers[p].settings.input,"click"),apptPicker(c.getAttribute("id"))):void 0},{on:i,getTimes:a,create:s,toggleOpen:toggleOpen}},jDom.ready(a)}(window,document,console);