var timeUtils=function(){var t,r,e,n={};return t=function(t,r){return t={timeing:t,arr:t.split(":")},t.hours=parseInt(t.arr[0]),t.minutes=parseInt(t.arr[1].substring(0,2)),t.pm="pm"==t.arr[1].substring(2,t.arr[1].length).trim().toLowerCase(),t.militaryhours=t.pm&&12!=t.hours?12+t.hours:t.hours,t.militaryhours=t.pm||12!=t.hours?t.militaryhours:0,r.setHours(t.militaryhours),r.setMinutes(t.minutes),r.setSeconds(0),t.date=r.setMilliseconds(0),t.totalminutes=60*t.militaryhours+t.minutes,t},r=function(r,e,n,i){i="undefined"==typeof i?new Date:i,r=t(r,i),e=t(e,i);for(var s=(e.totalminutes-r.totalminutes)/n+1,u=[],o=0;s>o;++o)u.push(new Date(r.date+6e4*o*n));return u},n.getTimes=function(t,e,n,i){return r(t,e,n,i)},e=function(t,r){var e,n,i,s;return r="undefined"==typeof r?!1:r,e=t.getHours(),i=e>11?!0:!1,e-=0!=e&&i?12:0,e=0==e?12:e,n=t.getMinutes(),n=10>n?"0"+n:n,i=i?"pm":"am",s=r?e+i:e+":"+n+" "+i},n.formatTimeStr=function(t,r){return e(t,r)},n}(window,document,console);
var jDom=function(t,e){var n,r,i,a;return create=function(t){return n("string"==typeof t?a(t):t)},n=function(t){var n,i,a,s,l;if(t.contains=null==t.contains?[]:t.contains,t.attributes=null==t.attributes?{}:t.attributes,t.type=null==t.type?"div":t.type,n=r(t.type,t.attributes),i=t.contains,"string"==typeof i)n.appendChild(e.createTextNode(i));else for(a=0;a<i.length;++a)s=i[a],"object"==typeof s?(l=create(s),n.appendChild(l)):n.appendChild(e.createTextNode(s));return n},r=function(t,n){var r,i,a;if(r=e.createElement(t),"undefined"!=typeof n)for(i in n)a=n[i],r.setAttribute(i,a);return r},i=function(t){var e,n,r,i,a,s,l,c;if(e={text:/\${([^}]+)}/,attr:/\$\[(.*?)\]/},n=t.match(e.text),r=t.match(e.attr),n&&(t=t.replace(n[0],"")),r&&(t=t.replace(r[0],"")),i="div",t.length>0||r)a=t.indexOf("."),s=t.indexOf("#"),a>0&&s>0?(i=t.substring(0,Math.min(a,s)),t=t.replace(i,"")):0>a&&0>s?(i=t,t=t.replace(i,"")):0>a*s&&(i=t.substring(0,Math.max(a,s)),t=t.replace(i,"")),l=!1,c=!1,t.length>0&&(s=t.indexOf("#"),s>-1&&(l=t.substring(s+1,t.length),a=l.indexOf("."),a>-1&&(l=l.substring(0,a)),t=t.replace("#"+l,"")),t.length>0&&(c=t.split(".").join(" ").trim()));else if(n&&!r)return n[1];if(r=r?r[1]:{},"string"==typeof r){var o=r.split(",");r={};for(var p=0;p<o.length;++p){var u=o[p].split("=");r[u[0]]=u[1]}}return l&&(r.id=l),c&&(r["class"]=c),{type:i,attributes:r,contains:n?[n[1]]:[]}},a=function(t){var e,n,r,s;e=t.split("$>"),r=e[0].indexOf("$+"),s=e[0].indexOf("$*"),n=i(r>-1||s>-1?"div":e.splice(0,1)[0]);for(var l=n,c=0;c<e.length;++c){for(var o=e[c].split("$+"),p=0;p<o.length;++p)if(s=o[p].indexOf("$*"),s>-1){var u=parseInt(o[p].substring(s+2,o[p].length));o[p]=o[p].replace("$*"+u,"");for(var f=0;u>f;++f)l.contains.push(a(o[p]))}else l.contains.push(a(o[p]));l=n.contains[n.contains.length-1]}return n},{create:create}}(window,document,console,jQuery);
var theApptPicker=function(t,e,i,n){var r,s,a,c,p,d,k,o,l,u,g,m,f;c={count:0,pickers:{}},p={start:"9:00am",end:"5:00pm",subinterval:60,interval:15,slidedur:280,opendur:300,height:"351px",opentext:"Choose Times",inputid:!1,changecallback:!1,expandcallback:!1,changetxt:!0},s=function(t,e){e="undefined"==typeof e?!1:!0;var i,n,r;i=[],r=e?t.length:t.length-1;for(var s=0;r>s;++s){var a,c={};e?(a=timeUtils.formatTimeStr(t[s]),c["data-time"]=t[s].getTime()):(a=timeUtils.formatTimeStr(t[s],!0)+" - "+timeUtils.formatTimeStr(t[s+1],!0),c["data-start"]=t[s].getTime(),c["data-end"]=t[s+1].getTime()),c["data-listindex"]=s,i.push({type:"li",attributes:c,contains:a})}return n={type:"ul",attributes:{"class":e?"appt-picker second":"appt-picker first"},contains:i},jDom.create(n)},r=function(t){var r,a,k;r=n.extend({},p,n(t).data()),i.log(r),r.btn=jDom.create("button.appt-picker-button#pickerBtn_"+c.count+"${"+r.opentext+"}"),n(r.btn).on("click",d),t.appendChild(r.btn),a=timeUtils.getTimes(r.start,r.end,r.subinterval),k=timeUtils.getTimes(r.start,r.end,r.interval),a=s(a),k=s(k,!0),t.appendChild(a),t.appendChild(k),t.setAttribute("data-pickerid","picker_"+c.count),r.minimizedheight=t.offsetHeight+"px",0!=r.inputid&&(r.input=e.getElementById(r.inputid),r.input&&(r.input.setAttribute("data-pickerid","picker_"+c.count),r.input.setAttribute("readonly","true"),n(r.input).on("click focus",function(){var t=this.getAttribute("data-pickerid");c.pickers[t].minimized&&n(c.pickers[t].settings.btn).trigger("click")}))),c.pickers["picker_"+c.count]={el:t,minimized:!0,expanded:!1,selecting:!1,start:!1,end:!1,startindex:0,endindex:0,lasthoverindex:-1,settings:r},++c.count},d=function(){var t="picker_"+this.getAttribute("id").split("pickerBtn_").pop();if(c.pickers[t].el.offsetHeight<parseFloat(c.pickers[t].settings.height)){var e=c.pickers[t].settings.height;c.pickers[t].minimized=!1}else{var e=c.pickers[t].settings.minimizedheight;c.pickers[t].minimized=!0}c.pickers[t].el.style.height=e},k=function(){var t,e,i,r,s,a;t=this.parentNode,e=t.parentNode,i=e.getElementsByTagName("ul")[1],s=e.getAttribute("data-pickerid"),r=this.getAttribute("data-start"),n(".appt-picker.first>li").removeClass("active"),n(this).addClass("active"),c.pickers[s].expanded||(c.pickers[s].expanded=!0,t.style.width="40%"),a=n(e).find('ul.appt-picker>li[data-time="'+r+'"]')[0].offsetTop,n(i).animate({scrollTop:a+"px"},300,"easeInOutExpo",function(){})},o=function(t,e,i){var r,s,a;if(r=t.getElementsByTagName("li"),s=Math.min(e,i),a=Math.max(e,i),e-i!=0){n(r).removeClass("pick-start pick-middle pick-end");for(var c=s+1;a>c;++c)n(r[c]).addClass("pick-middle");n(r[s]).addClass("pick-start"),n(r[a]).addClass("pick-end")}},g=function(t){var e;c.pickers[t].start>c.pickers[t].end&&(e=c.pickers[t].start,c.pickers[t].start=c.pickers[t].end,c.pickers[t].end=e)},l=function(){var t,r,s,a;if(t=this.parentNode,r=t.parentNode,a=r.getAttribute("data-pickerid"),s=new Date(parseFloat(this.getAttribute("data-time"))),0==c.pickers[a].selecting)c.pickers[a].selecting=!0,c.pickers[a].end=!1,c.pickers[a].start=s,c.pickers[a].startindex=this.getAttribute("data-listindex"),n(t).find("li").removeClass("pick-start pick-middle pick-end"),n(this).addClass("pick-start"),m(a);else{if(this.getAttribute("data-listindex")!=c.pickers[a].startindex&&(c.pickers[a].selecting=!1,c.pickers[a].end=s,c.pickers[a].endindex=this.getAttribute("data-listindex"),n(this).addClass("pick-end"),o(t,c.pickers[a].startindex,c.pickers[a].endindex),n(c.pickers[a].settings.btn).click(),c.pickers[a].settings.inputid)){g(a);var p=timeUtils.formatTimeStr(c.pickers[a].start)+" to "+timeUtils.formatTimeStr(c.pickers[a].end),d=[c.pickers[a].start.toISOString(),c.pickers[a].end.toISOString()];i.log(d.join(",")),e.getElementById(c.pickers[a].settings.inputid).value=p}m(a)}},u=function(){var t,e,i;i=this.parentNode,t=i.parentNode.getAttribute("data-pickerid"),e=this.getAttribute("data-listindex"),c.pickers[t].selecting&&c.pickers[t].lasthoverindex!=e&&(c.pickers[t].lasthoverindex=e,c.pickers[t].startindex!=e?o(i,c.pickers[t].startindex,e):(n(i.getElementsByTagName("li")).removeClass("pick-middle pick-end"),n(this).addClass("pick-start")))},m=function(t){if(c.pickers[t].settings.changecallback&&c.pickers[t].settings.changecallback(c.pickers[t]),c.pickers[t].settings.changetxt){var e=timeUtils.formatTimeStr(c.pickers[t].start)+" to "+timeUtils.formatTimeStr(c.pickers[t].end);c.pickers[t].settings.btn.innerHTML=e}},f=function(t,e,i){var n=!1;if(n="function"==typeof i?!0:!1,"undefined"!=typeof window[i]&&"function"==typeof window[i]&&(n=!0,i=window[i]),n){var r=t.getAttribute("data-pickerid");if("undefined"!=typeof c.pickers[r])switch(e.toLowerCase()){case"expand":c.pickers[r].settings.expandcallback=i;break;case"change":c.pickers[r].settings.changecallback=i}}},a=function(){n(".apptPicker").each(function(){r(this)}),n(e).on("click",".appt-picker.first>li",k),n(e).on("click",".appt-picker.second>li",l),n(e).on("hover focus",".appt-picker.second>li",u)},t.apptPicker=function(t){var s,a,p,d,k;return d=e.getElementById(t),k=d.getAttribute("data-pickerid"),s=function(e,i){return d?(f(d,e,i),apptPicker(t)):void 0},p=function(){return"undefined"!=typeof c.pickers[k]&&c.pickers[k].start&&c.pickers[k].end?{start:c.pickers[k].start,end:c.pickers[k].end}:!1},a=function(t){if(d){for(var e in t)d.setAttribute("data-"+e,t[e]);return i.log(d),k?apptPicker(d.getAttribute("id")):(r(d),apptPicker(d.getAttribute("id")))}},toggleOpen=function(){return"undefined"!=typeof k?(n(c.pickers[k].settings.btn).click(),apptPicker(d.getAttribute("id"))):void 0},{on:s,getTimes:p,create:a,toggleOpen:toggleOpen}},n(e).ready(a)}(window,document,console,jQuery);